<!DOCTYPE html>
<html>

<head>
    <title>Reset Password</title>
    <link rel="stylesheet" href="styles.css">
</head>

<body class="auth-body">

    <div class="auth-card card">
        <h2>Reset Password</h2>

        <label class="field-label">New Password</label>
        <input id="newPassword" type="password" class="text-input">

        <button id="resetBtn" class="btn-primary">Update Password</button>
        <p id="resetError" class="error-text"></p>
    </div>

    <script>
        const token = new URLSearchParams(window.location.search).get("token");

        document.getElementById("resetBtn").onclick = async () => {
            const newPassword = document.getElementById("newPassword").value.trim();

            const res = await fetch("http://localhost:3000/auth/reset-password", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({ token, newPassword })
            });

            const data = await res.json();
            if (!res.ok) {
                document.getElementById("resetError").textContent = data.error;
            } else {
                alert("Password updated! You may now log in.");
                window.location.href = "index.html";
            }
        };
    </script>

</body>

</html>